<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Admin – Wypłaty</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{background:#111;color:#fff;font-family:Arial}
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{border-bottom:1px solid #444;padding:8px;text-align:center}
.ok{background:#4caf50;color:#fff}
.no{background:#f44336;color:#fff}
button{border:none;padding:5px 8px;cursor:pointer}
</style>
</head>

<body>

<h1>Panel Admina – Wypłaty</h1>

<table>
<thead>
<tr>
<th>Imię</th>
<th>Email</th>
<th>Kwota</th>
<th>Data</th>
<th>Status</th>
<th>Akcja</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCVkqjA4Yw_cAyKJ5wZ_YojZmEsa_w3THs",
  authDomain: "money-19005.firebaseapp.com",
  projectId: "money-19005",
  storageBucket: "money-19005.firebasestorage.app",
  messagingSenderId: "843755877611",
  appId: "1:843755877611:web:b62bfa25950a7a21227aae",
  measurementId: "G-Z30W3GL7HN"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

db.collection("withdrawals").onSnapshot(snapshot=>{
  const list = document.getElementById("list");
  list.innerHTML="";
  snapshot.forEach(doc=>{
    const d = doc.data();
    list.innerHTML += `
      <tr>
        <td>${d.name}</td>
        <td>${d.email}</td>
        <td>${d.amount} zł</td>
        <td>${d.date}</td>
        <td>${d.status}</td>
        <td>
          <button class="ok" onclick="setStatus('${doc.id}','Zatwierdzona')">✔</button>
          <button class="no" onclick="setStatus('${doc.id}','Odrzucona')">✖</button>
        </td>
      </tr>
    `;
  });
});

function setStatus(id,status){
  db.collection("withdrawals").doc(id).update({status});
}
</script>

</body>
</html>
