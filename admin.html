<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Admina â€“ PlayWatch</title>
<style>
body { margin:0; font-family: Arial,sans-serif; background: linear-gradient(to right,#1e3c72,#2a5298); color:#fff; text-align:center;}
header { background:#0d1b33; padding:20px; }
header h1 { margin:0; }
table { margin:20px auto; border-collapse: collapse; width:90%; background: rgba(0,0,0,0.6);}
th, td { padding:12px; border:1px solid #fff; }
button { padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; margin:2px; }
.approve { background:#4CAF50; color:#000; }
.reject { background:#f44336; color:#fff; }
footer { margin-top:40px; padding:20px; background:#0d1b33; }
footer a { color:#ff9800; margin:0 10px; text-decoration:none; }
</style>
</head>
<body>

<header>
  <h1>ðŸ‘‘ Panel Admina</h1>
</header>

<section>
  <h2>Wnioski o wypÅ‚atÄ™</h2>
  <table id="requestsTable">
    <tr>
      <th>#</th>
      <th>UÅ¼ytkownik</th>
      <th>ImiÄ™ Nazwisko</th>
      <th>Email PayPal</th>
      <th>Kwota</th>
      <th>Data</th>
      <th>Akcja</th>
    </tr>
  </table>
</section>

<footer>
  <a href="index.html">Strona gÅ‚Ã³wna</a>
</footer>

<script>
// Wczytanie wszystkich wypÅ‚at z localStorage
let withdrawals = JSON.parse(localStorage.getItem("withdrawals")) || {};

// Funkcja odÅ›wieÅ¼ania tabeli wnioskÃ³w
function updateTable(){
  const table = document.getElementById("requestsTable");
  // UsuÅ„ stare wiersze poza nagÅ‚Ã³wkiem
  table.querySelectorAll("tr:not(:first-child)").forEach(e=>e.remove());
  
  let i=1;
  for(const user in withdrawals){
    withdrawals[user].forEach((w,index)=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${i}</td>
        <td>${user}</td>
        <td>${w.firstName} ${w.lastName}</td>
        <td>${w.paypalEmail}</td>
        <td>${w.amount} zÅ‚</td>
        <td>${w.date}</td>
        <td>
          <button class="approve" onclick="approve('${user}',${index})">âœ”</button>
          <button class="reject" onclick="reject('${user}',${index})">âœ–</button>
        </td>`;
      table.appendChild(tr);
      i++;
    });
  }
}

// Zatwierdzenie wniosku
function approve(user,index){
  alert(`WypÅ‚ata dla ${user} zatwierdzona!`);
  // Tutaj moÅ¼esz odejmowaÄ‡ punkty np. z users[user].points
  withdrawals[user].splice(index,1); // usuÅ„ wniosek po zatwierdzeniu
  localStorage.setItem("withdrawals",JSON.stringify(withdrawals));
  updateTable();
}

// Odrzucenie wniosku
function reject(user,index){
  alert(`WypÅ‚ata dla ${user} odrzucona!`);
  withdrawals[user].splice(index,1); // usuÅ„ wniosek po odrzuceniu
  localStorage.setItem("withdrawals",JSON.stringify(withdrawals));
  updateTable();
}

updateTable();
</script>
</body>
</html>
