<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Admin – Wypłaty</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{background:#111;color:#fff;font-family:Arial}
table{width:100%;border-collapse:collapse}
td,th{border-bottom:1px solid #444;padding:8px;text-align:center}
button{padding:5px}
.ok{background:#4caf50}
.no{background:#f44336}
</style>
</head>

<body>

<h1>Panel Admina</h1>

<table>
<thead>
<tr>
<th>Imię</th>
<th>Email</th>
<th>Kwota</th>
<th>Data</th>
<th>Status</th>
<th>Akcja</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<script>
const firebaseConfig = {
  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCVkqjA4Yw_cAyKJ5wZ_YojZmEsa_w3THs",
    authDomain: "money-19005.firebaseapp.com",
    projectId: "money-19005",
    storageBucket: "money-19005.firebasestorage.app",
    messagingSenderId: "843755877611",
    appId: "1:843755877611:web:b62bfa25950a7a21227aae",
    measurementId: "G-Z30W3GL7HN"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

db.collection("withdrawals").onSnapshot(snapshot=>{
  list.innerHTML="";
  snapshot.forEach(doc=>{
    const r = doc.data();
    list.innerHTML += `
      <tr>
        <td>${r.name}</td>
        <td>${r.email}</td>
        <td>${r.amount} zł</td>
        <td>${r.date}</td>
        <td>${r.status}</td>
        <td>
          <button class="ok" onclick="update('${doc.id}','Zatwierdzona')">✔</button>
          <button class="no" onclick="update('${doc.id}','Odrzucona')">✖</button>
        </td>
      </tr>
    `;
  });
});

function update(id,status){
  db.collection("withdrawals").doc(id).update({status});
}
</script>

</body>
</html>
