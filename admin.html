<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin</title>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, onSnapshot, updateDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCVkqjA4Yw_cAyKJ5wZ_YojZmEsa_w3THs",
  authDomain: "money-19005.firebaseapp.com",
  projectId: "money-19005",
  storageBucket: "money-19005.firebasestorage.app",
  messagingSenderId: "843755877611",
  appId: "1:843755877611:web:b62bfa25950a7a21227aae"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const lista = document.getElementById("lista");

onSnapshot(collection(db, "wyplaty"), (snapshot)=>{
  lista.innerHTML="";
  snapshot.forEach((docSnap)=>{
    const d = docSnap.data();
    lista.innerHTML += `
      <div class="item">
        <b>${d.email}</b><br>
        ${d.kwota} pkt<br>
        Status: ${d.status}<br>
        <button onclick="zatwierdz('${docSnap.id}')">Zatwierdź</button>
        <button onclick="odrzuc('${docSnap.id}')">Odrzuć</button>
      </div>
    `;
  });
});

window.zatwierdz = async function(id){
  await updateDoc(doc(db,"wyplaty",id),{
    status:"zatwierdzono"
  });
}

window.odrzuc = async function(id){
  await updateDoc(doc(db,"wyplaty",id),{
    status:"odrzucono"
  });
}
</script>

<style>
body{background:#0c0f1f;color:white;font-family:Arial;text-align:center}
.item{background:#181c3a;padding:15px;margin:15px;border-radius:10px}
button{margin:5px;padding:6px 12px;border:none;border-radius:6px;cursor:pointer}
</style>
</head>
<body>

<h1>Panel Admina</h1>
<div id="lista"></div>

</body>
</html>