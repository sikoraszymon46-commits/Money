<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlayWatch</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(to right, #1e3c72, #2a5298);
  color: #fff;
  text-align: center;
}

header {
  background: #0d1b33;
  padding: 20px;
}

section {
  max-width: 800px;
  margin: 20px auto;
  background: rgba(0,0,0,0.6);
  padding: 20px;
  border-radius: 12px;
}

input {
  padding: 10px;
  margin: 6px;
  width: 80%;
  max-width: 300px;
  border-radius: 6px;
  border: none;
}

button {
  padding: 10px 18px;
  margin: 6px;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  background: #ff9800;
}

footer {
  margin-top: 40px;
  padding: 20px;
  background: #0d1b33;
}
</style>
</head>

<body>

<header>
  <h1>ðŸŽ® PlayWatch</h1>
</header>

<!-- LOGOWANIE -->
<section id="loginBox">
  <h2>Logowanie / Rejestracja</h2>
  <input id="email" type="email" placeholder="Email"><br>
  <input id="password" type="password" placeholder="HasÅ‚o"><br>
  <button onclick="login()">Zaloguj</button>
  <button onclick="register()">Zarejestruj</button>
</section>

<!-- APLIKACJA -->
<section id="app" style="display:none;">
  <h2>Witaj, <span id="userEmail"></span></h2>

  <p>ðŸ’° Punkty: <b id="points">0</b></p>
  <p>ðŸ”¥ Rebirth: <b id="rebirth">0</b></p>

  <button onclick="logout()">Wyloguj</button>

  <hr>

  <h3>ðŸ–± Klikacz</h3>
  <button onclick="addPoints()">Kliknij (+1 pkt)</button>

  <hr>

  <h3>ðŸŽ² Losowanie 1â€“100</h3>
  <button onclick="draw()">Losuj</button>
  <p id="drawResult"></p>

  <hr>

  <h3>â™» Rebirth</h3>
  <p>Koszt: <span id="rebirthCost"></span> pkt</p>
  <button onclick="doRebirth()">Rebirth</button>
</section>

<footer>
  O nas | Regulamin | Polityka prywatnoÅ›ci
</footer>

<script>
let users = JSON.parse(localStorage.getItem("users")) || {};
let loggedUser = localStorage.getItem("loggedUser");

function saveUsers() {
  localStorage.setItem("users", JSON.stringify(users));
}

function register() {
  const e = email.value.trim();
  const p = password.value.trim();

  if (!e || !p) return alert("UzupeÅ‚nij email i hasÅ‚o");
  if (users[e]) return alert("Email juÅ¼ zarejestrowany");

  users[e] = {
    password: p,
    points: 0,
    rebirth: 0,
    rebirthCost: 100000
  };

  saveUsers();
  alert("Konto utworzone â€” moÅ¼esz siÄ™ zalogowaÄ‡");
}

function login() {
  const e = email.value.trim();
  const p = password.value.trim();

  if (!users[e] || users[e].password !== p)
    return alert("ZÅ‚y email lub hasÅ‚o");

  localStorage.setItem("loggedUser", e);
  showApp();
}

function logout() {
  localStorage.removeItem("loggedUser");
  app.style.display = "none";
  loginBox.style.display = "block";
}

function showApp() {
  loggedUser = localStorage.getItem("loggedUser");
  if (!loggedUser) return;

  loginBox.style.display = "none";
  app.style.display = "block";

  userEmail.innerText = loggedUser;
  updateUI();
}

function updateUI() {
  const u = users[loggedUser];
  points.innerText = u.points;
  rebirth.innerText = u.rebirth;
  rebirthCost.innerText = u.rebirthCost;
  saveUsers();
}

function addPoints() {
  users[loggedUser].points += 1;
  updateUI();
}

function draw() {
  const n = Math.floor(Math.random() * 100) + 1;
  users[loggedUser].points += n;
  drawResult.innerText = "Wylosowano: " + n;
  updateUI();
}

function doRebirth() {
  const u = users[loggedUser];
  if (u.points < u.rebirthCost)
    return alert("Za maÅ‚o punktÃ³w");

  u.points = 0;
  u.rebirth++;
  u.rebirthCost *= 10;
  updateUI();
}

if (loggedUser) showApp();
</script>

</body>
</html>
