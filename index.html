<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlayWatch</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(to right, #1e3c72, #2a5298);
  color: #fff;
  text-align: center;
}

header {
  background: #0d1b33;
  padding: 20px;
}

section {
  max-width: 800px;
  margin: 20px auto;
  background: rgba(0,0,0,0.6);
  padding: 20px;
  border-radius: 12px;
}

button {
  padding: 10px 15px;
  margin: 5px;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  background: #ff9800;
}

input {
  padding: 8px;
  border-radius: 5px;
  border: none;
  margin: 5px;
}

footer {
  margin-top: 40px;
  padding: 20px;
  background: #0d1b33;
}
</style>
</head>

<body>

<header>
  <h1>ðŸŽ® PlayWatch</h1>
  <div id="topInfo"></div>
</header>

<!-- LOGOWANIE -->
<section id="loginBox">
  <h2>Logowanie / Rejestracja</h2>
  <input id="loginUser" placeholder="Login"><br>
  <input id="loginPass" type="password" placeholder="HasÅ‚o"><br>
  <button onclick="login()">Zaloguj</button>
  <button onclick="register()">Zarejestruj</button>
</section>

<!-- APLIKACJA -->
<section id="app" style="display:none;">
  <h2>Witaj, <span id="userName"></span> ðŸ‘‹</h2>
  <p>ðŸ’° Punkty: <b id="points">0</b></p>
  <p>ðŸ”¥ Rebirth: <b id="rebirth">0</b></p>

  <button onclick="logout()">Wyloguj</button>

  <hr>

  <!-- KLIKACZ -->
  <h3>ðŸ–± Klikacz</h3>
  <button onclick="addPoints(1)">Kliknij (+1 pkt)</button>

  <hr>

  <!-- LOSOWANIE -->
  <h3>ðŸŽ² Losowanie 1â€“100</h3>
  <button onclick="draw()">Losuj</button>
  <p id="drawResult"></p>

  <hr>

  <!-- REBIRTH -->
  <h3>â™» Rebirth</h3>
  <p>Koszt: <span id="rebirthCost"></span> pkt</p>
  <button onclick="doRebirth()">Rebirth</button>
</section>

<footer>
  <a href="o-nas.html" style="color:#fff;">O nas</a> |
  <a href="regulamin.html" style="color:#fff;">Regulamin</a> |
  <a href="polityka-prywatnosci.html" style="color:#fff;">Polityka prywatnoÅ›ci</a>
</footer>

<script>
let users = JSON.parse(localStorage.getItem("users")) || {};
let loggedUser = localStorage.getItem("loggedUser");

function saveUsers() {
  localStorage.setItem("users", JSON.stringify(users));
}

function register() {
  const u = loginUser.value;
  const p = loginPass.value;

  if (!u || !p) return alert("UzupeÅ‚nij dane");
  if (users[u]) return alert("UÅ¼ytkownik juÅ¼ istnieje");

  users[u] = {
    password: p,
    points: 0,
    rebirth: 0,
    rebirthCost: 100000
  };

  saveUsers();
  alert("Konto utworzone, zaloguj siÄ™");
}

function login() {
  const u = loginUser.value;
  const p = loginPass.value;

  if (!users[u] || users[u].password !== p)
    return alert("ZÅ‚e dane");

  localStorage.setItem("loggedUser", u);
  showApp();
}

function logout() {
  localStorage.removeItem("loggedUser");
  location.reload();
}

function showApp() {
  loggedUser = localStorage.getItem("loggedUser");
  if (!loggedUser) return;

  loginBox.style.display = "none";
  app.style.display = "block";

  userName.innerText = loggedUser;
  updateUI();
}

function updateUI() {
  const u = users[loggedUser];
  points.innerText = u.points;
  rebirth.innerText = u.rebirth;
  rebirthCost.innerText = u.rebirthCost;
  saveUsers();
}

function addPoints(x) {
  users[loggedUser].points += x;
  updateUI();
}

function draw() {
  const n = Math.floor(Math.random() * 100) + 1;
  users[loggedUser].points += n;
  drawResult.innerText = "Wylosowano: " + n + " pkt";
  updateUI();
}

function doRebirth() {
  const u = users[loggedUser];
  if (u.points < u.rebirthCost)
    return alert("Za maÅ‚o punktÃ³w");

  u.points = 0;
  u.rebirth++;
  u.rebirthCost *= 10;
  updateUI();
}

showApp();
</script>

</body>
</html>
