<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Wyp≈Çaty</title>
<style>
body{
  font-family: Arial, sans-serif;
  background:#0f1220;
  color:#fff;
  margin:0;
  padding:20px;
}
h1{
  text-align:center;
}
.box{
  max-width:600px;
  margin:auto;
  background:#181c3a;
  padding:20px;
  border-radius:12px;
  margin-bottom:20px;
}
input, button{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:none;
  font-size:16px;
}
button{
  background:#4caf50;
  color:#fff;
  cursor:pointer;
}
button:hover{
  background:#43a047;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th, td{
  padding:8px;
  border-bottom:1px solid #333;
  text-align:center;
}
.status-pending{color:#ffc107;}
.status-ok{color:#4caf50;}
.status-no{color:#f44336;}
.info{
  font-size:14px;
  opacity:.8;
}
</style>
</head>
<body>

<h1>üí∏ Wyp≈Çaty</h1>

<div class="box">
  <p class="info">
    üí° Zasady:
    <br>‚Ä¢ 1 000 000 pkt = 1 z≈Ç
    <br>‚Ä¢ Minimalna wyp≈Çata: <b>30 z≈Ç</b>
  </p>

  <p>Twoje punkty: <b><span id="points">0</span></b></p>
  <p>Twoje saldo: <b><span id="balance">0</span> z≈Ç</b></p>

  <input id="name" placeholder="Imiƒô i nazwisko">
  <input id="paypal" placeholder="E-mail PayPal">
  <input id="amount" type="number" placeholder="Kwota (min. 30 z≈Ç)">

  <button onclick="sendWithdraw()">Wy≈õlij wniosek</button>
</div>

<div class="box">
  <h2>üìú Historia wyp≈Çat</h2>
  <table>
    <thead>
      <tr>
        <th>Kwota</th>
        <th>Data</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="history"></tbody>
  </table>
</div>

<script>
const POINTS_PER_ZL = 1000000;
const MIN_WITHDRAW = 30;

let points = Number(localStorage.getItem("points") || 0);
let withdrawals = JSON.parse(localStorage.getItem("withdrawals") || "[]");

function refresh(){
  document.getElementById("points").innerText = points.toLocaleString();
  document.getElementById("balance").innerText =
    Math.floor(points / POINTS_PER_ZL);

  const h = document.getElementById("history");
  h.innerHTML = "";
  withdrawals.forEach(w=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${w.amount} z≈Ç</td>
      <td>${w.date}</td>
      <td class="status-${w.status}">
        ${w.status === "pending" ? "Oczekuje" :
          w.status === "ok" ? "Zatwierdzona" : "Odrzucona"}
      </td>`;
    h.appendChild(tr);
  });
}

function sendWithdraw(){
  const name = document.getElementById("name").value.trim();
  const paypal = document.getElementById("paypal").value.trim();
  const amount = Number(document.getElementById("amount").value);

  if(!name || !paypal){
    alert("Uzupe≈Çnij dane");
    return;
  }
  if(amount < MIN_WITHDRAW){
    alert("Minimalna wyp≈Çata to 30 z≈Ç");
    return;
  }

  const neededPoints = amount * POINTS_PER_ZL;
  if(points < neededPoints){
    alert("Brak wystarczajƒÖcych punkt√≥w");
    return;
  }

  points -= neededPoints;
  localStorage.setItem("points", points);

  withdrawals.unshift({
    name,
    paypal,
    amount,
    date: new Date().toLocaleString(),
    status: "pending"
  });

  localStorage.setItem("withdrawals", JSON.stringify(withdrawals));
  refresh();
  alert("Wniosek wys≈Çany");
}

refresh();
</script>

</body>
</html>
